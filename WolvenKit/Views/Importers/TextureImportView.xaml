<reactiveUi:ReactiveUserControl
    x:Class="WolvenKit.Views.Importers.TextureImportView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dialogs="clr-namespace:WolvenKit.ViewModels.Dialogs;assembly=WolvenKit.App"
    xmlns:dialogs1="clr-namespace:WolvenKit.App.ViewModels.Dialogs;assembly=WolvenKit.App"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:layout="clr-namespace:WolvenKit.Layout"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:reactiveUi="http://reactiveui.net"
    xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
    xmlns:vm="clr-namespace:WolvenKit.App.ViewModels.Importers;assembly=WolvenKit.App"
    x:TypeArguments="vm:TextureImportViewModel">

    <Grid
        Grid.Row="1"
        Background="{DynamicResource ContentBackgroundAlt2}"
        Visibility="{Binding IsImportsSelected, Converter={StaticResource boolToVisibilityConverter}}">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Top Toolbar  -->
        <Grid Grid.Row="0" Background="{DynamicResource ContentBackgroundAlt2}">

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Orientation="Horizontal">

                <!--  ResetSettingsCommand  -->
                <Button
                    Margin="4"
                    Padding="4"
                    VerticalAlignment="Center"
                    Background="{DynamicResource ContentBackground}"
                    BorderBrush="{DynamicResource ContentBackgroundAlt}"
                    BorderThickness="1"
                    Command="{Binding ResetSettingsCommand}"
                    FontSize="12"
                    Style="{DynamicResource ButtonCustom}">
                    <TextBlock Margin="1" Text="Reset Settings" />
                </Button>

                <!--  ImportSettingsCommand  -->
                <Button
                    Margin="4"
                    Padding="4"
                    VerticalAlignment="Center"
                    Background="{DynamicResource ContentBackground}"
                    BorderBrush="{DynamicResource ContentBackgroundAlt}"
                    BorderThickness="1"
                    Command="{Binding ImportSettingsCommand}"
                    FontSize="12"
                    Style="{DynamicResource ButtonCustom}">
                    <TextBlock Margin="1" Text="Load Settings" />
                </Button>

                <!--  CopyArgumentsTemplateToCommand  -->
                <Button
                    Margin="0,0,6,0"
                    Padding="4"
                    VerticalAlignment="Center"
                    Background="{DynamicResource ContentBackground}"
                    BorderBrush="{DynamicResource ContentBackgroundAlt}"
                    BorderThickness="1"
                    Command="{Binding CopyArgumentsTemplateToCommand}"
                    CommandParameter="{Binding Path=SelectedItem.Content, ElementName=ToThese}"
                    FontSize="12"
                    Style="{DynamicResource ButtonCustom}"
                    ToolTip="Copy I/O settings from selected file">
                    <StackPanel Orientation="Horizontal">
                        <iconPacks:PackIconForkAwesome
                            Width="13"
                            Height="13"
                            Margin="2"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Kind="FilesOutline" />
                        <TextBlock Margin="1" Text="Copy Settings" />
                    </StackPanel>
                </Button>

                <!--  Destination for copied settings  -->
                <syncfusion:ComboBoxAdv
                    x:Name="ToThese"
                    Margin="0,0,0,0"
                    Padding="6,6,0,6"
                    VerticalAlignment="Center"
                    FontSize="12"
                    SelectedIndex="0"
                    Text="apply"
                    ToolTip="Destination for copied settings">

                    <syncfusion:ComboBoxItemAdv Content="Selected in Grid" />
                    <syncfusion:ComboBoxItemAdv Content="All in Grid" />
                </syncfusion:ComboBoxAdv>

                <!--  ShowAdvancedOptions  -->
                <mah:ToggleSwitch
                    Command="{Binding ToggleAdvancedOptionsCommand}"
                    IsOn="{Binding ShowAdvancedOptions}"
                    OffContent="Show Advanced Options"
                    OnContent="Hide Advanced Options"
                    ToolTip="Toggle Advanced Import/Export Options" />

            </StackPanel>

            <!--  Status  -->
            <StackPanel Grid.Row="1" Orientation="Horizontal">

                <!--  ProcessSelectedCommand  -->
                <Button
                    Margin="0,0,4,0"
                    Padding="4"
                    VerticalAlignment="Center"
                    Background="{DynamicResource ContentBackground}"
                    BorderBrush="{DynamicResource ContentBackgroundAlt}"
                    BorderThickness="1"
                    Command="{Binding ProcessSelectedCommand}"
                    FontSize="12"
                    Style="{DynamicResource ButtonCustom}">

                    <StackPanel Orientation="Horizontal">
                        <iconPacks:PackIconCodicons
                            Width="13"
                            Height="13"
                            Margin="2"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Kind="DebugStart" />

                        <TextBlock Margin="1" Text="Process Selected" />
                    </StackPanel>

                </Button>

                <!--  ProcessAllCommand  -->
                <Button
                    Margin="4,0,0,0"
                    Padding="4"
                    VerticalAlignment="Center"
                    Background="{DynamicResource ContentBackground}"
                    BorderBrush="{DynamicResource ContentBackgroundAlt}"
                    BorderThickness="1"
                    Command="{Binding ProcessAllCommand}"
                    FontSize="12"
                    Style="{DynamicResource ButtonCustom}">

                    <StackPanel Orientation="Horizontal">
                        <iconPacks:PackIconCodicons
                            Width="13"
                            Height="13"
                            Margin="2"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Kind="RunAll" />

                        <TextBlock Margin="1" Text="Process All" />
                    </StackPanel>

                </Button>

                <!--  Lock selected file  -->
                <ToggleButton
                    Margin="0,0,4,0"
                    Padding="4"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Background="{DynamicResource ContentBackgroundAlt}"
                    IsChecked="{Binding SelectionLocked}"
                    Style="{DynamicResource WPFToggleButtonStyle}"
                    ToolTip="Lock selected file">
                    <StackPanel Orientation="Horizontal">
                        <iconPacks:BootstrapIcons Kind="Lock" />
                    </StackPanel>
                </ToggleButton>

                <TextBlock
                    x:Name="CurrentSelectedItemButtonbar"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    FontSize="11"
                    Text="{Binding CurrentSelectedInGridName}" />

            </StackPanel>

        </Grid>

        <Grid Grid.Row="1">

            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="3" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>

            <!--  CellDoubleTapped="SfDataGrid_CellDoubleTapped"  -->
            <syncfusion:SfDataGrid
                x:Name="ImportGrid"
                Grid.Column="0"
                AllowEditing="True"
                AllowFiltering="True"
                AllowResizingColumns="True"
                AllowSorting="True"
                AutoGenerateColumns="False"
                BorderThickness="0,1,0,1"
                ColumnSizer="Auto"
                SelectionMode="Extended">

                <syncfusion:SfDataGrid.Columns>
                    <syncfusion:GridCheckBoxColumn
                        Width="50"
                        AllowEditing="True"
                        HeaderText="#"
                        MappingName="IsChecked">
                        <syncfusion:GridCheckBoxColumn.HeaderTemplate>
                            <DataTemplate>
                                <CheckBox
                                    Command="layout:SFDataGridCommands.CheckAndUnCheck"
                                    CommandParameter="{Binding ElementName=ImportGrid}"
                                    IsChecked="{Binding Path=IsHeaderChecked}" />
                            </DataTemplate>
                        </syncfusion:GridCheckBoxColumn.HeaderTemplate>
                    </syncfusion:GridCheckBoxColumn>
                    <syncfusion:GridTextColumn
                        AllowEditing="False"
                        ColumnSizer="Star"
                        HeaderText="Name"
                        HorizontalHeaderContentAlignment="Left"
                        MappingName="Name" />
                    <syncfusion:GridTextColumn
                        AllowEditing="False"
                        ColumnSizer="AutoLastColumnFill"
                        HeaderText="Import Task"
                        HorizontalHeaderContentAlignment="Left"
                        MappingName="Properties" />
                </syncfusion:SfDataGrid.Columns>

                <!--  Click="ShowSettings_OnClick"  -->
                <syncfusion:SfDataGrid.RecordContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Show settings" />
                    </ContextMenu>
                </syncfusion:SfDataGrid.RecordContextMenu>

            </syncfusion:SfDataGrid>

            <GridSplitter Grid.Column="1" HorizontalAlignment="Stretch" />

            <!--  Special Import / Export Options  -->
            <!--  CollectionEditorOpening="PropertyGrid_CollectionEditorOpening"  -->
            <Grid
                x:Name="XAML_AdvancedOptionsOverlay"
                Grid.Column="2"
                Background="{DynamicResource ContentBackgroundAlt2}">

                <syncfusion:PropertyGrid
                    x:Name="OverlayPropertyGrid"
                    Grid.Row="1"
                    AutoGeneratingPropertyGridItem="OverlayPropertyGrid_AutoGeneratingPropertyGridItem"
                    ButtonPanelVisibility="Hidden"
                    CategoryForeground="{DynamicResource MahApps.Brushes.Accent}"
                    DescriptionPanelVisibility="Visible"
                    EnableGrouping="True"
                    PropertyExpandMode="NestedMode"
                    ReadOnlyBackground="{DynamicResource ContentBackgroundAlt}"
                    SearchBoxVisibility="Hidden"
                    SortDirection="{x:Null}" />

            </Grid>

        </Grid>

    </Grid>

</reactiveUi:ReactiveUserControl>
